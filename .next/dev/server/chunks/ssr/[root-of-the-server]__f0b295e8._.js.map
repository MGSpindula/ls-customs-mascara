{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/ls-customs-mascara/src/app/dashboard/DashboardClient.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from 'react';\nimport Link from 'next/link';\n\nexport default function DashboardClient({ initialItems = [] }) {\n  const [items, setItems] = useState(initialItems);\n  const [openComponents, setOpenComponents] = useState({});\n\n  async function reload() {\n    try {\n      const res = await fetch('/api/items/list');\n      const data = await res.json();\n      setItems(data || []);\n    } catch (err) {\n      console.error(err);\n      alert('Failed to load items');\n    }\n  }\n\n  async function callDelete(id) {\n    try {\n      const res = await fetch('/api/items/delete?id=' + id, { method: 'DELETE' });\n      const data = await res.json();\n      if (!data.success) {\n        alert(data.error || 'Failed to delete');\n        return;\n      }\n      await reload();\n    } catch (err) {\n      console.error(err);\n      alert('Failed to delete');\n    }\n  }\n\n  async function callAddStock(id) {\n    try {\n      await fetch(`/api/items/add-stock?id=${id}&amount=1`);\n      await reload();\n    } catch (err) {\n      console.error(err);\n      alert('Failed to add stock');\n    }\n  }\n\n  async function callRemoveStock(id) {\n    try {\n      await fetch(`/api/items/remove-stock?id=${id}&amount=1`);\n      await reload();\n    } catch (err) {\n      console.error(err);\n      alert('Failed to remove stock');\n    }\n  }\n\n  function toggleComponents(id) {\n    setOpenComponents(prev => ({ ...prev, [id]: !prev[id] }));\n  }\n\n  return (\n    <>\n      <table className=\"w-full text-left border-collapse\">\n        <thead>\n          <tr>\n            <th className=\"border-b p-3\">Name</th>\n            <th className=\"border-b p-3\">Type</th>\n            <th className=\"border-b p-3\">Net Price</th>\n            <th className=\"border-b p-3\">Stock</th>\n            <th className=\"border-b p-3\">Actions</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          {items.map(itm => (\n            <tr key={itm._id}>\n              <td className=\"border-b p-3\">\n                {itm.name}\n\n                {itm.type === 'manufactured' && (\n                  <button\n                    onClick={() => toggleComponents(itm._id)}\n                    className=\"ml-2 text-blue-600 underline\"\n                  >\n                    Components\n                  </button>\n                )}\n\n                {openComponents[itm._id] && itm.type === 'manufactured' && (\n                  <div className=\"mt-2 text-sm text-gray-700\">\n                    {itm.components.length === 0 && <p>No components found</p>}\n\n                    {itm.components.map((comp, i) => (\n                      <div key={i}>\n                        {comp.item?.name} x {comp.qty}\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </td>\n\n              <td className=\"border-b p-3 capitalize\">{itm.type}</td>\n              <td className=\"border-b p-3\">{itm.netPrice}</td>\n              <td className=\"border-b p-3\">{itm.stock}</td>\n\n              <td className=\"border-b p-3 flex gap-2\">\n                <button\n                  onClick={() => callAddStock(itm._id)}\n                  className=\"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700\"\n                >\n                  +\n                </button>\n\n                <button\n                  onClick={() => callRemoveStock(itm._id)}\n                  className=\"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700\"\n                >\n                  -\n                </button>\n\n                <button\n                  onClick={() => callDelete(itm._id)}\n                  className=\"px-4 py-1 bg-red-600 text-white rounded hover:bg-red-700\"\n                >\n                  Delete\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      <div className=\"mt-10 flex gap-4\">\n        <Link href=\"/dashboard/add-raw\" className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\">\n          Add Raw Item\n        </Link>\n\n        <Link href=\"/dashboard/add-manufactured\" className=\"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700\">\n          Add Manufactured Item\n        </Link>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}