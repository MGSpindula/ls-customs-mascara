{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/ls-customs-mascara/src/lib/mongo.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nexport async function connectDB() {\n  if (mongoose.connection.readyState >= 1) return;\n\n  await mongoose.connect(process.env.MONGO_URI);\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe;IACpB,IAAI,oHAAQ,CAAC,UAAU,CAAC,UAAU,IAAI,GAAG;IAEzC,MAAM,oHAAQ,CAAC,OAAO,CAAC,QAAQ,GAAG,CAAC,SAAS;AAC9C"}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/ls-customs-mascara/src/models/Item.js"],"sourcesContent":["import mongoose from 'mongoose';\n\nconst ComponentSchema = new mongoose.Schema({\n  item: { type: mongoose.Schema.Types.ObjectId, ref: 'Item', required: true },\n  qty: { type: Number, required: true }\n});\n\nconst ItemSchema = new mongoose.Schema({\n  name: { type: String, required: true },\n  type: { type: String, enum: ['raw', 'manufactured'], required: true },\n  purchasePrice: { type: Number },\n  components: [ComponentSchema],\n  stock: { type: Number, default: 0 }\n});\n\n// Dynamic net price calculation\nItemSchema.methods.getNetPrice = async function() {\n  if (this.type === 'raw') return this.purchasePrice;\n\n  let total = 0;\n\n  for (const comp of this.components) {\n    const item = await mongoose.model('Item').findById(comp.item);\n\n    // Safe check: skip missing raw materials\n    if (!item) {\n      console.warn(`Component item missing: ${comp.item}`);\n      continue;\n    }\n\n    // Safe recursive price call\n    const price = await item.getNetPrice();\n    total += price * comp.qty;\n  }\n\n  return total;\n};\n\nexport default mongoose.models.Item || mongoose.model('Item', ItemSchema);\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB,IAAI,oHAAQ,CAAC,MAAM,CAAC;IAC1C,MAAM;QAAE,MAAM,oHAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ;QAAE,KAAK;QAAQ,UAAU;IAAK;IAC1E,KAAK;QAAE,MAAM;QAAQ,UAAU;IAAK;AACtC;AAEA,MAAM,aAAa,IAAI,oHAAQ,CAAC,MAAM,CAAC;IACrC,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,MAAM;QAAE,MAAM;QAAQ,MAAM;YAAC;YAAO;SAAe;QAAE,UAAU;IAAK;IACpE,eAAe;QAAE,MAAM;IAAO;IAC9B,YAAY;QAAC;KAAgB;IAC7B,OAAO;QAAE,MAAM;QAAQ,SAAS;IAAE;AACpC;AAEA,gCAAgC;AAChC,WAAW,OAAO,CAAC,WAAW,GAAG;IAC/B,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,OAAO,IAAI,CAAC,aAAa;IAElD,IAAI,QAAQ;IAEZ,KAAK,MAAM,QAAQ,IAAI,CAAC,UAAU,CAAE;QAClC,MAAM,OAAO,MAAM,oHAAQ,CAAC,KAAK,CAAC,QAAQ,QAAQ,CAAC,KAAK,IAAI;QAE5D,yCAAyC;QACzC,IAAI,CAAC,MAAM;YACT,QAAQ,IAAI,CAAC,CAAC,wBAAwB,EAAE,KAAK,IAAI,EAAE;YACnD;QACF;QAEA,4BAA4B;QAC5B,MAAM,QAAQ,MAAM,KAAK,WAAW;QACpC,SAAS,QAAQ,KAAK,GAAG;IAC3B;IAEA,OAAO;AACT;uCAEe,oHAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,oHAAQ,CAAC,KAAK,CAAC,QAAQ"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/ls-customs-mascara/src/app/api/items/search/route.js"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { connectDB } from '../../../../lib/mongo';\nimport Item from '../../../../models/Item';\n\nexport async function GET(request) {\n  await connectDB();\n\n  const { searchParams } = new URL(request.url);\n  const query = searchParams.get('query') || '';\n\n  const results = await Item.find({\n    name: { $regex: query, $options: 'i' }\n  })\n    .limit(10)\n    .lean();\n\n  return NextResponse.json(results);\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,IAAI,OAAO;IAC/B,MAAM,IAAA,kIAAS;IAEf,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,QAAQ,aAAa,GAAG,CAAC,YAAY;IAE3C,MAAM,UAAU,MAAM,kIAAI,CAAC,IAAI,CAAC;QAC9B,MAAM;YAAE,QAAQ;YAAO,UAAU;QAAI;IACvC,GACG,KAAK,CAAC,IACN,IAAI;IAEP,OAAO,gJAAY,CAAC,IAAI,CAAC;AAC3B"}}]
}