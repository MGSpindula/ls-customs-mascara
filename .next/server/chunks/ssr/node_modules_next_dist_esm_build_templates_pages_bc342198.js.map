{"version":3,"sources":["../../../../node_modules/next/dist/esm/build/templates/pages.js","../../../../src/pages/dashboard/add-manufactured.js"],"sourcesContent":["import { PagesRouteModule } from \"next/dist/esm/server/route-modules/pages/module.compiled\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { hoist } from \"next/dist/esm/build/templates/helpers\";\n// Import the app and document modules.\nimport * as document from \"INNER_DOCUMENT\";\nimport * as app from \"INNER_APP\";\n// Import the userland code.\nimport * as userland from \"INNER_PAGE\";\nimport { getHandler } from \"next/dist/esm/server/route-modules/pages/pages-handler\";\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default');\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps');\nexport const getStaticPaths = hoist(userland, 'getStaticPaths');\nexport const getServerSideProps = hoist(userland, 'getServerSideProps');\nexport const config = hoist(userland, 'config');\nexport const reportWebVitals = hoist(userland, 'reportWebVitals');\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(userland, 'unstable_getStaticProps');\nexport const unstable_getStaticPaths = hoist(userland, 'unstable_getStaticPaths');\nexport const unstable_getStaticParams = hoist(userland, 'unstable_getStaticParams');\nexport const unstable_getServerProps = hoist(userland, 'unstable_getServerProps');\nexport const unstable_getServerSideProps = hoist(userland, 'unstable_getServerSideProps');\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n    definition: {\n        kind: RouteKind.PAGES,\n        page: \"/dashboard/add-manufactured\",\n        pathname: \"/dashboard/add-manufactured\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n    components: {\n        // default export might not exist when optimized for data only\n        App: app.default,\n        Document: document.default\n    },\n    userland\n});\nexport const handler = getHandler({\n    srcPage: \"/dashboard/add-manufactured\",\n    config,\n    userland,\n    routeModule,\n    getStaticPaths,\n    getStaticProps,\n    getServerSideProps\n});\n\n//# sourceMappingURL=pages.js.map\n","import { useState, useEffect } from 'react';\n\nexport default function AddManufactured() {\n  const [name, setName] = useState('');\n\n  const [search, setSearch] = useState('');\n  const [results, setResults] = useState([]);\n\n  const [components, setComponents] = useState([]);\n  const [selectedId, setSelectedId] = useState('');\n  const [qty, setQty] = useState(1);\n\n  // Fetch autocomplete suggestions\n  useEffect(() => {\n    if (search.length < 1) {\n      setResults([]);\n      return;\n    }\n\n    const timeout = setTimeout(() => {\n      fetch('/api/items/search?query=' + search)\n        .then(r => r.json())\n        .then(setResults);\n    }, 300);\n\n    return () => clearTimeout(timeout);\n  }, [search]);\n\n  function addComponent() {\n    if (!selectedId || qty <= 0) return;\n\n    setComponents([...components, { item: selectedId, qty }]);\n    setSelectedId('');\n    setSearch('');\n    setQty(1);\n    setResults([]);\n  }\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n\n    await fetch('/api/items/add-manufactured', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        name,\n        components\n      })\n    });\n\n    window.location.href = '/dashboard';\n  }\n\n  return (\n    <div className=\"min-h-screen p-10 bg-gray-100\">\n      <form onSubmit={handleSubmit} className=\"bg-white p-8 max-w-xl mx-auto rounded-xl shadow\">\n        \n        <h1 className=\"text-3xl font-bold mb-6\">Add Manufactured Item</h1>\n\n        {/* Name */}\n        <input\n          className=\"border p-3 w-full rounded mb-6\"\n          placeholder=\"Product name\"\n          value={name}\n          onChange={e => setName(e.target.value)}\n          required\n        />\n\n        {/* Component search */}\n        <div className=\"mb-6\">\n          <label className=\"block text-sm mb-2\">Add component</label>\n\n          <input\n            className=\"border p-3 w-full rounded\"\n            placeholder=\"Search raw item\"\n            value={search}\n            onChange={e => {\n              setSearch(e.target.value);\n              setSelectedId('');\n            }}\n          />\n\n          {results.length > 0 && (\n            <div className=\"border p-3 rounded bg-white shadow mt-1 max-h-40 overflow-y-auto\">\n              {results.map(r => (\n                <div\n                  key={r._id}\n                  className=\"p-2 hover:bg-gray-100 cursor-pointer\"\n                  onClick={() => {\n                    setSelectedId(r._id);\n                    setSearch(r.name);\n                    setResults([]);\n                  }}\n                >\n                  {r.name} (ID: {r._id})\n                </div>\n              ))}\n            </div>\n          )}\n\n          {selectedId && (\n            <p className=\"text-sm mt-2 text-green-600\">Selected ID: {selectedId}</p>\n          )}\n\n          {/* Quantity */}\n          <input\n            className=\"border p-3 w-full rounded mt-3\"\n            type=\"number\"\n            placeholder=\"Quantity\"\n            value={qty}\n            onChange={e => setQty(Number(e.target.value))}\n            min=\"1\"\n          />\n\n          <button\n            type=\"button\"\n            onClick={addComponent}\n            className=\"mt-3 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n          >\n            Add component\n          </button>\n        </div>\n\n        {/* Component list */}\n        {components.length > 0 && (\n          <div className=\"mb-6\">\n            <h2 className=\"text-xl font-semibold mb-3\">Components</h2>\n            <ul className=\"list-disc pl-6\">\n              {components.map((c, i) => (\n                <li key={i}>\n                  ID: {c.item} qty: {c.qty}\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n\n        <button className=\"w-full px-4 py-3 bg-green-600 text-white rounded hover:bg-green-700\">\n          Save manufactured item\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}